<div *rxContext="let user on user">
  <template [ngTemplateOutlet]="validUser" [ngOutletContext]="{ user: user }" *ngIf="user"></template>
  <template [ngTemplateOutlet]="invalidUser" *ngIf="!user"></template>
</div>


<template #validUser let-user="user">
  <img class="img-fluid mx-auto d-block user-image" [src]="user.avatar_url" />
  <div class="username">
    {{ user.first_name + ' ' + user.last_name}}
  </div>

  <div class="card teams-card">
    <div class="card-header"><h6>My Active Teams</h6></div>
    <ul class="list-group" *rxContext="let list on projects">
      <li *ngFor="let project of list" class="list-group-item">
        <a [routerLink]="['/projects', project.id]">
          <span class="badge text-truncate" [style.background-color]="project.color">{{ project.team_name }}</span>
        </a>
      </li>
    </ul>
  </div>


  <div class="spacer"></div>

  <div class="btn-group-vertical action-buttons">
    <button class="btn btn-default">My Profile</button>
    <button class="btn btn-default" (click)="onLogout()">Log Out</button>
  </div>
</template>

<template #invalidUser>
  <div class="btn-group-vertical">
    <button class="btn btn-default" [routerLink]="['/login']">Login</button>
    <button class="btn btn-default" >Register</button>
  </div>
</template>
